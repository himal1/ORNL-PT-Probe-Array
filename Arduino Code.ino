int incomingByte = 0;

byte byteList[39][6] = { 
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000001},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000010},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000100},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00001000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00010000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00100000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b01000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b10000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000001, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000010, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000100, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00001000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00010000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00100000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b01000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b10000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000001, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000010, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00000100, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00001000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00010000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b00100000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b01000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000000, 0b10000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000001, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000010, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00000100, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00001000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00010000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b00100000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b01000000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000000, 0b10000000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000001, 0b00000000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000010, 0b00000000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00000100, 0b00000000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00001000, 0b00000000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00010000, 0b00000000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b00100000, 0b00000000, 0b00000000, 0b00000000, 0b00000000},
{0b00000000, 0b01000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000} };

// define pins and other variables
const int latchPin = 3;
const int clockPin = 2;
const int dataPin  = 5;
const int oePin  = 4;

bool hasRun = false;

void outActivate(unsigned int outNumber)
{
  digitalWrite(latchPin, LOW);
  digitalWrite(oePin, HIGH);
  for(int i=0; i<6; i++)
    {
      shiftOut(dataPin, clockPin, MSBFIRST, byteList[outNumber][i]);
    }
  digitalWrite(oePin, LOW);
  digitalWrite(latchPin, HIGH);
}

void setup()
{
  Serial.begin(9600);
  delay(100);
  Serial.println("<Probe Switcher is Ready>");
  
  //set pins to output because they are addressed in the main loop
  pinMode(latchPin, OUTPUT);
  pinMode(clockPin, OUTPUT);
  pinMode(dataPin, OUTPUT);
  pinMode(oePin, OUTPUT);
  digitalWrite(oePin, LOW);

}

void loop()
{
  if(Serial.available() > 1)
  {
    int v1 = Serial.read();
    int v2 = Serial.read();

    int activatedNumber = (v1 - 48)*10 + (v2 - 48);
    outActivate(activatedNumber);
    Serial.print(activatedNumber);
    
    Serial.println(" is activated");
  }
  
}
